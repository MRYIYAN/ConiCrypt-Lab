#!/bin/bash
clear
echo -e "\033[1;36m"
echo "â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—"
echo "â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ•”â•â•â•     â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—"
echo "â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•"
echo "â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—  â•šâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•”â•â•â•â•    â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—"
echo "â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•"
echo " â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•â•â•šâ•â• â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•   â•šâ•â•   â•šâ•â•        â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•"
echo -e "\033[0m\n"
echo -e "\033[1;34m=====================================================================\033[0m"
echo "   CONiCRYPT-LAB | INTERFAZ DE ESCRITORIO (React + Tauri + WS)"
echo -e "\033[1;34m=====================================================================\033[0m\n"

# =====================================================
# Barra de carga animada (compatible con WSL y Docker)
# =====================================================
echo -e "\033[1;33m[Cargando mÃ³dulos del entorno...]\033[0m"
sleep 0.5
echo -e "\033[1;33m[=====-------------------------------------------]  20%\033[0m"
sleep 0.5
echo -e "\033[1;33m[====================----------------------------]  45%\033[0m"
sleep 0.5
echo -e "\033[1;33m[===================================-------------]  70%\033[0m"
sleep 0.5
echo -e "\033[1;33m[===============================================] 100%\033[0m"
sleep 0.5
echo -e "\033[1;32m InicializaciÃ³n completada.\033[0m\n"


# =====================================================
# VerificaciÃ³n de dependencias GTK/WebKit/JSC
# =====================================================
echo -e "\033[1;36mğŸ§© Verificando mÃ³dulos GTK/WebKit/JSC...\033[0m"
for lib in /usr/lib/x86_64-linux-gnu/libwebkit2gtk* /usr/lib/x86_64-linux-gnu/libjavascriptcore*; do
  [ -f "$lib" ] && echo "    $(basename "$lib")"
done
echo ""
sleep 1

# =====================================================
# ComprobaciÃ³n de red interna y WS (siempre afirmativos)
# =====================================================
echo -e "\033[1;34m Comprobando red interna y WebSocket...\033[0m"
echo -e "    Docker bridge activo."
echo -e "    WS: activo (backend y Rust operativo)."
echo ""
sleep 1

# =====================================================
# NÃºcleo y Plotter (siempre afirmativos)
# =====================================================
echo -e "\033[1;32m NÃºcleo C: listo (/app/Core/bin/conicrypt)\033[0m"
echo -e "\033[1;32m Plotter Python detectado (plot_conics.py)\033[0m"
echo ""
sleep 1

# =====================================================
# Carga simulada por fases (compatible con WSL/Docker)
# =====================================================
echo -e "\033[1;33m[Cargando mÃ³dulos del entorno...]\033[0m"
sleep 0.5
echo -e "\033[1;33m[=====-------------------------------------------]  20%\033[0m"
sleep 0.5
echo -e "\033[1;33m[====================----------------------------]  45%\033[0m"
sleep 0.5
echo -e "\033[1;33m[===================================-------------]  70%\033[0m"
sleep 0.5
echo -e "\033[1;33m[===============================================] 100%\033[0m"
sleep 0.5
echo -e "\033[1;32m Carga completada.\033[0m\n"

# =====================================================
# Fase final: preparaciÃ³n de entorno Tauri (simulada)
# =====================================================
echo -e "\033[1;36m  Preparando entorno para la interfaz Tauri...\033[0m"
sleep 0.5
echo -e "\033[1;33m[=====-------------------------------------------]  25%\033[0m"
sleep 0.5
echo -e "\033[1;33m[==================------------------------------]  55%\033[0m"
sleep 0.5
echo -e "\033[1;33m[==================================--------------]  80%\033[0m"
sleep 0.5
echo -e "\033[1;33m[===============================================] 100%\033[0m"
sleep 0.5
echo ""

# Espera controlada
echo -e "\033[1;34m Esperando sincronizaciÃ³n de servicios internos (20s)...\033[0m"
sleep 20
echo -e "\033[1;34m---------------------------------------------------------------------\033[0m"
echo -e "\n\033[1;32m YA PUEDES INICIAR TAURI \033[0m"
echo -e "\033[1;34m---------------------------------------------------------------------\033[0m"
sleep 10

echo -e "\033[1;36m Mostrando logs de consola y contenedores...\033[0m"
echo -e "\033[1;34m=====================================================================\033[0m"
echo -e "\033[1;32m ENTORNO CONiCRYPT-LAB LISTO Y EN EJECUCIÃ“N\033[0m"
echo -e "\033[1;34m=====================================================================\033[0m"

# Mantiene el contenedor activo
tail -f /dev/null
